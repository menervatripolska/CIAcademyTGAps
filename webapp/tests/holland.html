<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <title>–¢–µ—Å—Ç –ì–æ–ª–ª–∞–Ω–¥–∞ ‚Äî Crypto Intelligence Academy</title>
  <link rel="stylesheet" href="../css/kryptan.css">
  <style>
    .pair-card {
      background: var(--bg-card);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-lg);
      padding: 20px;
      margin-bottom: 12px;
      transition: border-color var(--transition);
    }
    .pair-card.answered { border-color: rgba(155,48,255,0.3); }
    .pair-options {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 12px;
    }
    @media (max-width: 400px) {
      .pair-options { grid-template-columns: 1fr; }
    }
    #result-section { display: none; }
    .type-bar {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 10px;
    }
    .type-bar-label {
      font-family: var(--font-title);
      font-size: 0.75rem;
      letter-spacing: 0.1em;
      min-width: 140px;
      color: var(--text-secondary);
    }
    .type-bar-track {
      flex: 1;
      height: 8px;
      background: rgba(255,255,255,0.05);
      border-radius: 4px;
      overflow: hidden;
    }
    .type-bar-fill {
      height: 100%;
      border-radius: 4px;
      transition: width 1s ease;
    }
    .type-bar-score {
      font-family: var(--font-title);
      font-size: 0.8rem;
      color: var(--neon-violet);
      min-width: 24px;
      text-align: right;
    }
    .type-colors { R: '#ef4444', I: '#8b5cf6', A: '#ec4899', S: '#3b82f6', E: '#f59e0b', C: '#10b981' }
  </style>
</head>
<body>
<div class="page-wrap">

  <!-- Header -->
  <div style="padding:20px 0 8px;">
    <div style="display:flex;align-items:center;gap:12px;margin-bottom:16px;">
      <button onclick="history.back()" class="btn btn-outline" style="padding:8px 14px;font-size:0.8rem;">‚Üê –ù–∞–∑–∞–¥</button>
      <div style="flex:1;">
        <div id="qProgressBar" style="height:4px;background:rgba(255,255,255,0.06);border-radius:2px;overflow:hidden;">
          <div id="qProgressFill" style="height:100%;width:0%;background:linear-gradient(90deg,var(--neon-purple),var(--neon-green));transition:width 0.4s ease;"></div>
        </div>
      </div>
      <span id="qProgressCount" style="font-family:var(--font-title);font-size:0.75rem;color:var(--neon-purple);">0/42</span>
    </div>

    <div class="neon-badge purple" style="margin-bottom:12px;">üéØ –¢–µ—Å—Ç 1 –∏–∑ 5</div>
    <h1 style="font-family:var(--font-title);font-size:1.4rem;font-weight:900;letter-spacing:0.05em;text-transform:uppercase;background:linear-gradient(135deg,#fff,var(--neon-violet));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:6px;">–¢–µ—Å—Ç –ì–æ–ª–ª–∞–Ω–¥–∞</h1>
    <p style="font-family:var(--font-body);color:var(--text-muted);font-size:0.9rem;font-weight:500;">–í—ã–±–µ—Ä–∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏—é, –∫–æ—Ç–æ—Ä–∞—è –Ω—Ä–∞–≤–∏—Ç—Å—è –±–æ–ª—å—à–µ. 42 –ø–∞—Ä—ã.</p>
  </div>

  <div id="quiz-container"></div>

  <button class="btn btn-primary btn-full" id="calc-btn" onclick="calcHolland()" style="margin-top:16px;display:none;">
    ‚ö° –ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
  </button>

  <!-- Result -->
  <div id="result-section">
    <div class="chain-divider"><span class="chain-icon">‚óà –†–ï–ó–£–õ–¨–¢–ê–¢ ‚óà</span></div>

    <div class="ka-card">
      <div class="question-num">üéØ –ü—Ä–æ—Ñ–∏–ª—å –ì–æ–ª–ª–∞–Ω–¥–∞</div>
      <div id="top-type" style="font-family:var(--font-title);font-size:1.6rem;font-weight:900;margin-bottom:4px;"></div>
      <p id="top-desc" style="font-family:var(--font-text);color:var(--text-secondary);font-size:0.95rem;line-height:1.6;margin-bottom:20px;"></p>

      <div class="question-num" style="margin-top:16px;">üìä –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤</div>
      <div id="type-bars"></div>
    </div>

    <button class="btn btn-success btn-full" id="next-btn" onclick="finishTest()">
      ‚úÖ –ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Ç–µ—Å—Ç—É
    </button>
  </div>

</div>

<script src="../js/core.js"></script>
<script>
const pairs = [
  {c1:"–ò–Ω–∂–µ–Ω–µ—Ä-–º–µ—Ö–∞–Ω–∏–∫",t1:"R",c2:"–ò–Ω–∂–µ–Ω–µ—Ä-–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤—â–∏–∫",t2:"I"},
  {c1:"–í—Ä–∞—á-—Ç–µ—Ä–∞–ø–µ–≤—Ç",t1:"S",c2:"–î–∏–∑–∞–π–Ω–µ—Ä –æ–¥–µ–∂–¥—ã",t2:"A"},
  {c1:"–ë—É—Ö–≥–∞–ª—Ç–µ—Ä",t1:"C",c2:"–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º",t2:"E"},
  {c1:"–ë–∏–æ–ª–æ–≥-–∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å",t1:"I",c2:"–ü—Å–∏—Ö–æ–ª–æ–≥",t2:"S"},
  {c1:"–•—É–¥–æ–∂–Ω–∏–∫-–æ—Ñ–æ—Ä–º–∏—Ç–µ–ª—å",t1:"A",c2:"–ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç",t2:"I"},
  {c1:"–ê–≤—Ç–æ–º–µ—Ö–∞–Ω–∏–∫",t1:"R",c2:"–°–µ–∫—Ä–µ—Ç–∞—Ä—å-—Ä–µ—Ñ–µ—Ä–µ–Ω—Ç",t2:"C"},
  {c1:"–ê–¥–≤–æ–∫–∞—Ç",t1:"E",c2:"–†–µ–¥–∞–∫—Ç–æ—Ä –≥–∞–∑–µ—Ç—ã",t2:"A"},
  {c1:"–≠–∫–æ–Ω–æ–º–∏—Å—Ç",t1:"C",c2:"–ë–∏–æ—Ö–∏–º–∏–∫",t2:"I"},
  {c1:"–í–æ—Å–ø–∏—Ç–∞—Ç–µ–ª—å",t1:"S",c2:"–ü—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å",t2:"E"},
  {c1:"–†–∞–¥–∏–æ—Ç–µ—Ö–Ω–∏–∫",t1:"R",c2:"–ê–∫—Ç–µ—Ä",t2:"A"},
  {c1:"–ú–∞—Ç–µ–º–∞—Ç–∏–∫",t1:"I",c2:"–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä",t2:"A"},
  {c1:"–Æ—Ä–∏—Å—Ç",t1:"E",c2:"–ß–µ—Ä—Ç–µ–∂–Ω–∏–∫",t2:"C"},
  {c1:"–ü–æ–≤–∞—Ä",t1:"R",c2:"–°–æ—Ü–∏–æ–ª–æ–≥",t2:"I"},
  {c1:"–£—á–∏—Ç–µ–ª—å",t1:"S",c2:"–§–æ—Ç–æ–≥—Ä–∞—Ñ",t2:"A"},
  {c1:"–ê—É–¥–∏—Ç–æ—Ä",t1:"C",c2:"–¢–æ—Ä–≥–æ–≤—ã–π –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—å",t2:"E"},
  {c1:"–°–ª–µ—Å–∞—Ä—å-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª—å—â–∏–∫",t1:"R",c2:"–§–∞—Ä–º–∞—Ü–µ–≤—Ç",t2:"I"},
  {c1:"–õ–æ–≥–æ–ø–µ–¥",t1:"S",c2:"–ñ—É—Ä–Ω–∞–ª–∏—Å—Ç",t2:"A"},
  {c1:"–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –¥–∏—Ä–µ–∫—Ç–æ—Ä",t1:"E",c2:"–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ä—å",t2:"C"},
  {c1:"–ì–µ–æ–ª–æ–≥",t1:"I",c2:"–ú—É–∑—ã–∫–∞–Ω—Ç",t2:"A"},
  {c1:"–ò–Ω–∂–µ–Ω–µ—Ä –ø–æ –¢–ë",t1:"R",c2:"–ù–∞–ª–æ–≥–æ–≤—ã–π –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä",t2:"C"},
  {c1:"–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–π —Ç—Ä–µ–Ω–µ—Ä",t1:"S",c2:"–ü—Ä–æ–¥—é—Å–µ—Ä",t2:"E"},
  {c1:"–§–∏–∑–∏–∫-—Ç–µ–æ—Ä–µ—Ç–∏–∫",t1:"I",c2:"–ú–∞–∫–ª–µ—Ä",t2:"E"},
  {c1:"–†–µ–∂–∏—Å—Å–µ—Ä",t1:"A",c2:"–°—Ç–∞—Ç–∏—Å—Ç–∏–∫",t2:"C"},
  {c1:"–ó–æ–æ—Ç–µ—Ö–Ω–∏–∫",t1:"R",c2:"–ë–∏–æ—Ñ–∏–∑–∏–∫",t2:"I"},
  {c1:"–û—Ñ–∏—Ü–∏–∞–Ω—Ç",t1:"S",c2:"–ò—Å–∫—É—Å—Å—Ç–≤–æ–≤–µ–¥",t2:"A"},
  {c1:"–î–∏–ø–ª–æ–º–∞—Ç",t1:"E",c2:"–ê—Ä—Ö–∏–≤–∞—Ä–∏—É—Å",t2:"C"},
  {c1:"–≠–∫–æ–ª–æ–≥",t1:"I",c2:"–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ –ø–µ—Ä—Å–æ–Ω–∞–ª—É",t2:"S"},
  {c1:"–¢–æ–∫–∞—Ä—å",t1:"R",c2:"–ü–∏—Å–∞—Ç–µ–ª—å",t2:"A"},
  {c1:"–°–≤—è—â–µ–Ω–Ω–æ—Å–ª—É–∂–∏—Ç–µ–ª—å",t1:"S",c2:"–ù–æ—Ç–∞—Ä–∏—É—Å",t2:"C"},
  {c1:"–î–∏—Ä–µ–∫—Ç–æ—Ä –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏—è",t1:"E",c2:"–£—á–µ–Ω—ã–π-–∞—Å—Ç—Ä–æ–Ω–æ–º",t2:"I"},
  {c1:"–≠–ª–µ–∫—Ç—Ä–∏–∫",t1:"R",c2:"–í–µ—Ç–µ—Ä–∏–Ω–∞—Ä",t2:"S"},
  {c1:"–ü—Ä–æ–≤–∏–∑–æ—Ä",t1:"I",c2:"–ö–æ—Ä—Ä–µ–∫—Ç–æ—Ä",t2:"C"},
  {c1:"–ì–∏–¥-–ø–µ—Ä–µ–≤–æ–¥—á–∏–∫",t1:"S",c2:"–†–µ–∫–ª–∞–º–Ω—ã–π –∞–≥–µ–Ω—Ç",t2:"E"},
  {c1:"–®–≤–µ—è",t1:"R",c2:"–•—É–¥–æ–∂–Ω–∏–∫-–º–æ–¥–µ–ª—å–µ—Ä",t2:"A"},
  {c1:"–ê—Ä—Ö–µ–æ–ª–æ–≥",t1:"I",c2:"–≠–∫—Å–∫—É—Ä—Å–æ–≤–æ–¥",t2:"S"},
  {c1:"–û—Ñ–æ—Ä–º–∏—Ç–µ–ª—å –≤–∏—Ç—Ä–∏–Ω",t1:"A",c2:"–ö–∞—Å—Å–∏—Ä",t2:"C"},
  {c1:"–õ–∞–±–æ—Ä–∞–Ω—Ç",t1:"I",c2:"–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä",t2:"E"},
  {c1:"–õ–µ—Å–Ω–∏–∫",t1:"R",c2:"–°–∫—É–ª—å–ø—Ç–æ—Ä",t2:"A"},
  {c1:"–ü—Å–∏—Ö–∏–∞—Ç—Ä",t1:"I",c2:"–°—É–¥—å—è",t2:"E"},
  {c1:"–§–æ—Ç–æ–∫–æ—Ä—Ä–µ—Å–ø–æ–Ω–¥–µ–Ω—Ç",t1:"A",c2:"–ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç-–∞–Ω–∞–ª–∏—Ç–∏–∫",t2:"C"},
  {c1:"–§–µ—Ä–º–µ—Ä",t1:"R",c2:"–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥—É",t2:"E"},
  {c1:"–ë–∏–±–ª–∏–æ–≥—Ä–∞—Ñ",t1:"C",c2:"–í—Ä–∞—á-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç",t2:"S"},
];

const interp = {
  R:{name:"–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π (R)",desc:"–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Å–∫–ª–∞–¥. –†–∞–±–æ—Ç–∞ —Å –æ–±—ä–µ–∫—Ç–∞–º–∏, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏, —Ç–µ—Ö–Ω–∏–∫–æ–π. –¶–µ–Ω–∏—à—å —á—ë—Ç–∫–æ—Å—Ç—å –∏ –º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.",color:"#ef4444"},
  I:{name:"–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π (I)",desc:"–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫. –ù–∞—É–∫–∞, –ª–æ–≥–∏–∫–∞, —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ—Å–Ω–æ–≤—ã. –û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ –ø–æ–∑–Ω–∞–Ω–∏–µ.",color:"#8b5cf6"},
  A:{name:"–ê—Ä—Ç–∏—Å—Ç–∏—á–Ω—ã–π (A)",desc:"–¢–≤–æ—Ä—á–µ—Å–∫–∞—è –Ω–∞—Ç—É—Ä–∞. –°–∞–º–æ–≤—ã—Ä–∞–∂–µ–Ω–∏–µ, —ç—Å—Ç–µ—Ç–∏–∫–∞, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å. –ù–µ –≤—ã–Ω–æ—Å–∏—à—å —Ä—É—Ç–∏–Ω—ã –∏ –∂—ë—Å—Ç–∫–∏—Ö –ø—Ä–∞–≤–∏–ª.",color:"#ec4899"},
  S:{name:"–°–æ—Ü–∏–∞–ª—å–Ω—ã–π (S)",desc:"–ü—Ä–∏–∑–≤–∞–Ω–∏–µ ‚Äî –æ–±—É—á–∞—Ç—å, –ø–æ–º–æ–≥–∞—Ç—å, –∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä–æ–≤–∞—Ç—å. –í—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å —ç–º–ø–∞—Ç–∏–∏ –∏ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ –ª—é–¥–µ–π.",color:"#3b82f6"},
  E:{name:"–ü—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å—Å–∫–∏–π (E)",desc:"–õ–∏–¥–µ—Ä –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä. –†–∏—Å–∫, –≤–ª–∏—è–Ω–∏–µ, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ. –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π —É—Å–ø–µ—Ö –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –∞–º–±–∏—Ü–∏–æ–∑–Ω—ã—Ö —Ü–µ–ª–µ–π.",color:"#f59e0b"},
  C:{name:"–ö–æ–Ω–≤–µ–Ω—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π (C)",desc:"–°–∏—Å—Ç–µ–º–∞ –∏ –ø–æ—Ä—è–¥–æ–∫. –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏, –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏, —Ü–∏—Ñ—Ä–∞–º–∏. –¶–µ–Ω–∏—à—å —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∏ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å.",color:"#10b981"},
};

let answers = {};

const container = document.getElementById('quiz-container');
pairs.forEach((p, i) => {
  const div = document.createElement('div');
  div.className = 'pair-card';
  div.id = `pair-${i}`;
  div.innerHTML = `
    <div class="question-num">–í—ã–±–æ—Ä ${i+1} –∏–∑ 42</div>
    <div class="pair-options">
      <button class="option-btn" onclick="selectPair(${i},'${p.t1}',this)">${p.c1}</button>
      <button class="option-btn" onclick="selectPair(${i},'${p.t2}',this)">${p.c2}</button>
    </div>`;
  container.appendChild(div);
});

function selectPair(idx, type, btn) {
  const card = document.getElementById(`pair-${idx}`);
  card.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
  btn.classList.add('selected');
  card.classList.add('answered');
  answers[idx] = type;
  updateProgress();
}

function updateProgress() {
  const done = Object.keys(answers).length;
  const pct = done / pairs.length * 100;
  document.getElementById('qProgressFill').style.width = pct + '%';
  document.getElementById('qProgressCount').textContent = `${done}/${pairs.length}`;
  document.getElementById('calc-btn').style.display = done >= pairs.length ? 'flex' : 'none';
}

function calcHolland() {
  if (Object.keys(answers).length < pairs.length) {
    showToast('–û—Ç–≤–µ—Ç—å –Ω–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã!'); return;
  }
  const scores = {R:0,I:0,A:0,S:0,E:0,C:0};
  Object.values(answers).forEach(t => scores[t]++);

  // Show result
  document.getElementById('quiz-container').style.display = 'none';
  document.getElementById('calc-btn').style.display = 'none';
  document.getElementById('result-section').style.display = 'block';
  window.scrollTo(0,0);

  // Top type
  const sorted = Object.entries(scores).sort((a,b)=>b[1]-a[1]);
  const topKey = sorted[0][0];
  const top = interp[topKey];
  document.getElementById('top-type').textContent = top.name;
  document.getElementById('top-type').style.color = top.color;
  document.getElementById('top-desc').textContent = top.desc;

  // Bars
  const max = sorted[0][1] || 1;
  const barsEl = document.getElementById('type-bars');
  barsEl.innerHTML = sorted.map(([k,v]) => `
    <div class="type-bar">
      <span class="type-bar-label">${interp[k].name}</span>
      <div class="type-bar-track">
        <div class="type-bar-fill" style="width:${v/max*100}%;background:${interp[k].color};box-shadow:0 0 8px ${interp[k].color}88;"></div>
      </div>
      <span class="type-bar-score">${v}</span>
    </div>`).join('');

  // Animate bars after render
  setTimeout(() => {}, 50);

  // Save
  const result = {
    topType: topKey,
    topName: top.name,
    scores,
    sortedTop3: sorted.slice(0,3).map(([k])=>k).join('-'),
  };
  Progress.saveTest('holland', result);
}

function finishTest() {
  goToNextTest();
}
</script>
</body>
</html>
