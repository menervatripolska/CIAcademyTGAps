<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <title>–°–∫–ª–æ–Ω–Ω–æ—Å—Ç—å –∫ –∞–∑–∞—Ä—Ç—É ‚Äî Kryptan Academy</title>
  <link rel="stylesheet" href="../css/kryptan.css">
  <style>
    .yn-options { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 12px; }
    #result-section { display: none; }
    .risk-meter {
      text-align: center;
      padding: 32px 0;
    }
    .risk-num {
      font-family: var(--font-title);
      font-size: 5rem;
      font-weight: 900;
      line-height: 1;
    }
    .risk-label {
      font-family: var(--font-body);
      font-size: 1rem;
      font-weight: 600;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      margin-top: 8px;
    }
  </style>
</head>
<body>
<div class="page-wrap">

  <div style="padding:20px 0 8px;">
    <div style="display:flex;align-items:center;gap:12px;margin-bottom:16px;">
      <button onclick="history.back()" class="btn btn-outline" style="padding:8px 14px;font-size:0.8rem;">‚Üê –ù–∞–∑–∞–¥</button>
      <div style="flex:1;">
        <div style="height:4px;background:rgba(255,255,255,0.06);border-radius:2px;overflow:hidden;">
          <div id="qProgressFill" style="height:100%;width:0%;background:linear-gradient(90deg,var(--neon-purple),var(--neon-green));transition:width 0.4s;"></div>
        </div>
      </div>
      <span id="qProgressCount" style="font-family:var(--font-title);font-size:0.75rem;color:var(--neon-purple);">0/8</span>
    </div>
    <div class="neon-badge purple" style="margin-bottom:12px;">üé≤ –¢–µ—Å—Ç 2 –∏–∑ 5</div>
    <h1 style="font-family:var(--font-title);font-size:1.4rem;font-weight:900;letter-spacing:0.05em;text-transform:uppercase;background:linear-gradient(135deg,#fff,var(--neon-violet));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:6px;">–°–∫–ª–æ–Ω–Ω–æ—Å—Ç—å –∫ –∞–∑–∞—Ä—Ç—É</h1>
    <p style="font-family:var(--font-body);color:var(--text-muted);font-size:0.9rem;font-weight:500;">–û—Ü–µ–Ω–∏ —Å–≤–æ—ë –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ —Ä–∏—Å–∫—É. 8 –≤–æ–ø—Ä–æ—Å–æ–≤, —á–µ—Å—Ç–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã.</p>
  </div>

  <div id="quiz-container"></div>

  <button class="btn btn-primary btn-full" id="calc-btn" onclick="calcGambling()" style="margin-top:16px;display:none;">
    ‚ö° –ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
  </button>

  <!-- Result -->
  <div id="result-section">
    <div class="chain-divider"><span class="chain-icon">‚óà –†–ï–ó–£–õ–¨–¢–ê–¢ ‚óà</span></div>
    <div class="ka-card">
      <div class="risk-meter">
        <div class="risk-num" id="risk-score"></div>
        <div class="risk-label" id="risk-label"></div>
      </div>
      <div class="chain-divider" style="margin:8px 0 16px;"><span class="chain-icon">‚óá</span></div>
      <div class="question-num">üìä –ê–Ω–∞–ª–∏–∑</div>
      <p id="risk-desc" style="font-family:var(--font-text);color:var(--text-secondary);font-size:0.95rem;line-height:1.7;"></p>
      <div style="margin-top:16px;padding:12px 16px;background:rgba(155,48,255,0.06);border:1px solid var(--border-neon);border-radius:var(--radius-md);">
        <p id="risk-rec" style="font-family:var(--font-body);color:var(--text-primary);font-size:0.9rem;line-height:1.6;font-weight:500;"></p>
      </div>
    </div>
    <button class="btn btn-success btn-full" onclick="finishTest()">
      ‚úÖ –ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Ç–µ—Å—Ç—É
    </button>
  </div>

</div>

<script src="../js/core.js"></script>
<script>
const questions = [
  "–°–ª—É—á–∞–ª–æ—Å—å –ª–∏ –≤–∞–º –ª–≥–∞—Ç—å –±–ª–∏–∑–∫–∏–º, —á—Ç–æ–±—ã —Å–∫—Ä—ã—Ç—å –∏—Å—Ç–∏–Ω–Ω—É—é —Å—Ç–µ–ø–µ–Ω—å –≤–∞—à–µ–≥–æ —É–≤–ª–µ—á–µ–Ω–∏—è –∏–≥—Ä–æ–π?",
  "–ß—É–≤—Å—Ç–≤—É–µ—Ç–µ –ª–∏ –≤—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –∏–≥—Ä–∞—Ç—å –Ω–∞ –±–æ–ª–µ–µ –∫—Ä—É–ø–Ω—ã–µ —Å—É–º–º—ã, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Ç—É –∂–µ –æ—Å—Ç—Ä–æ—Ç—É –æ—â—É—â–µ–Ω–∏–π?",
  "–î–µ–ª–∞–ª–∏ –ª–∏ –≤—ã –Ω–µ–æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω—ã–µ, –Ω–æ –±–µ–∑—É—Å–ø–µ—à–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å, —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –∏–ª–∏ –ø—Ä–µ–∫—Ä–∞—Ç–∏—Ç—å –∏–≥—Ä—É?",
  "–í–æ–∑–≤—Ä–∞—â–∞–ª–∏—Å—å –ª–∏ –≤—ã –∫ –∏–≥—Ä–µ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å –ø–æ—Å–ª–µ –ø—Ä–æ–∏–≥—Ä—ã—à–∞, —á—Ç–æ–±—ã ¬´–æ—Ç—ã–≥—Ä–∞—Ç—å—Å—è¬ª?",
  "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –ª–∏ –≤—ã –∏–≥—Ä—É –∫–∞–∫ —Å–ø–æ—Å–æ–± —É–π—Ç–∏ –æ—Ç –ª–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º –∏–ª–∏ –æ–±–ª–µ–≥—á–∏—Ç—å —á—É–≤—Å—Ç–≤–æ –≤–∏–Ω—ã/—Ç—Ä–µ–≤–æ–≥–∏?",
  "–†–∏—Å–∫–æ–≤–∞–ª–∏ –ª–∏ –≤—ã –≤–∞–∂–Ω—ã–º–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º–∏, —Ä–∞–±–æ—Ç–æ–π –∏–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ –∫–∞—Ä—å–µ—Ä–Ω–æ–≥–æ —Ä–æ—Å—Ç–∞ –∏–∑-–∑–∞ –∏–≥—Ä—ã?",
  "–ü–æ–ª–∞–≥–∞–ª–∏—Å—å –ª–∏ –≤—ã –Ω–∞ –¥—Ä—É–≥–∏—Ö –ª–∏—Ü –≤ –ø–æ–∏—Å–∫–µ –¥–µ–Ω–µ–≥, —á—Ç–æ–±—ã –æ–±–ª–µ–≥—á–∏—Ç—å –æ—Ç—á–∞—è–Ω–Ω–æ–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ, –≤—ã–∑–≤–∞–Ω–Ω–æ–µ –∏–≥—Ä–æ–π?",
  "–ß—É–≤—Å—Ç–≤—É–µ—Ç–µ –ª–∏ –≤—ã —Å–∏–ª—å–Ω—É—é –ø–æ–≥–ª–æ—â—ë–Ω–Ω–æ—Å—Ç—å –∏–≥—Ä–æ–π (–ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –º—ã—Å–ª–∏ –æ –ø—Ä–æ—à–ª—ã—Ö –∏–≥—Ä–∞—Ö –∏–ª–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª–µ–¥—É—é—â–∏—Ö)?",
];

const levels = [
  {min:0,max:0,label:"–ù–∏–∑–∫–∏–π —Ä–∏—Å–∫",color:"var(--neon-green)",
   desc:"–ü—Ä–∏–∑–Ω–∞–∫–æ–≤ –∏–≥—Ä–æ–≤–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ. –¢—ã –æ—Ç–Ω–æ—Å–∏—à—å—Å—è –∫ –∞–∑–∞—Ä—Ç—É –∑—Ä–µ–ª–æ –∏ –±–µ–∑ –¥–µ—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤.",
   rec:"–ü—Ä–æ–¥–æ–ª–∂–∞–π –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —Ä–∏—Å–∫–∏. –ù–∞ –∫—Ä–∏–ø—Ç–æ-—Ä—ã–Ω–∫–µ –≤–∞–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —ç—Ç–æ —Ö–ª–∞–¥–Ω–æ–∫—Ä–æ–≤–∏–µ."},
  {min:1,max:3,label:"–°—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫",color:"var(--neon-gold)",
   desc:"–ü—Ä–æ—è–≤–ª—è—é—Ç—Å—è –ø–µ—Ä–≤—ã–µ –º–∞—Ä–∫–µ—Ä—ã —Å–∫–ª–æ–Ω–Ω–æ—Å—Ç–∏ –∫ –∞–∑–∞—Ä—Ç—É. –ü–æ–≥—Ä–∞–Ω–∏—á–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, —Ç—Ä–µ–±—É—é—â–µ–µ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç–∏.",
   rec:"–£—Å—Ç–∞–Ω–æ–≤–∏ –∂—ë—Å—Ç–∫–∏–µ –ª–∏–º–∏—Ç—ã –Ω–∞ —Å–¥–µ–ª–∫–∏. –ò–∑—É—á–∏ –ø—Ä–∞–≤–∏–ª–∞ —Ä–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–∞ –¥–æ –Ω–∞—á–∞–ª–∞ —Ç–æ—Ä–≥–æ–≤–ª–∏."},
  {min:4,max:5,label:"–í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫",color:"#ff9800",
   desc:"–í—ã—Å–æ–∫–∞—è —Å–∫–ª–æ–Ω–Ω–æ—Å—Ç—å –∫ –∞–∑–∞—Ä—Ç—É. –ö—Ä–∏–ø—Ç–æ-—Ä—ã–Ω–æ–∫ –±—É–¥–µ—Ç –ø—Ä–æ–≤–æ—Ü–∏—Ä–æ–≤–∞—Ç—å –∏–º–ø—É–ª—å—Å–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è.",
   rec:"–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–π–¥–∏ –∫—É—Ä—Å –ø–æ –ø—Å–∏—Ö–æ–ª–æ–≥–∏–∏ —Ç—Ä–µ–π–¥–∏–Ω–≥–∞. –¢–æ—Ä–≥–æ–≤–ª—è –±–µ–∑ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã ‚Äî –ø—Ä—è–º–æ–π –ø—É—Ç—å –∫ —É–±—ã—Ç–∫–∞–º."},
  {min:6,max:8,label:"–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ä–∏—Å–∫",color:"#ff5252",
   desc:"–í—ã—Ä–∞–∂–µ–Ω–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ –ø–∞—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∞–∑–∞—Ä—Ç–∞. –ö—Ä–∏–ø—Ç–æ-—Ä—ã–Ω–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏—á–µ—Å–∫–∏ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–∫–∞–∑–∞–Ω –±–µ–∑ —Ä–∞–±–æ—Ç—ã —Å–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–º.",
   rec:"–ê–∫–∞–¥–µ–º–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç –ø—Ä–æ–∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å –ø—Å–∏—Ö–æ–ª–æ–≥–æ–º –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –ª—é–±–æ–π —Ç–æ—Ä–≥–æ–≤–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏."},
];

let answers = {};

const container = document.getElementById('quiz-container');
questions.forEach((q, i) => {
  const div = document.createElement('div');
  div.className = 'ka-card';
  div.style.marginBottom = '12px';
  div.innerHTML = `
    <div class="question-num">–í–æ–ø—Ä–æ—Å ${i+1} –∏–∑ 8</div>
    <div class="question-text">${q}</div>
    <div class="yn-options">
      <button class="option-btn" onclick="selectYN(${i},1,this)">–î–∞</button>
      <button class="option-btn" onclick="selectYN(${i},0,this)">–ù–µ—Ç</button>
    </div>`;
  container.appendChild(div);
});

function selectYN(idx, val, btn) {
  const card = btn.closest('.ka-card');
  card.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
  btn.classList.add('selected');
  answers[idx] = val;
  updateProgress();
}

function updateProgress() {
  const done = Object.keys(answers).length;
  const pct = done / questions.length * 100;
  document.getElementById('qProgressFill').style.width = pct + '%';
  document.getElementById('qProgressCount').textContent = `${done}/${questions.length}`;
  document.getElementById('calc-btn').style.display = done >= questions.length ? 'flex' : 'none';
}

function calcGambling() {
  if (Object.keys(answers).length < questions.length) {
    showToast('–û—Ç–≤–µ—Ç—å –Ω–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã!'); return;
  }
  const score = Object.values(answers).reduce((a,b) => a+b, 0);

  document.getElementById('quiz-container').style.display = 'none';
  document.getElementById('calc-btn').style.display = 'none';
  document.getElementById('result-section').style.display = 'block';
  window.scrollTo(0,0);

  const level = levels.find(l => score >= l.min && score <= l.max);
  const scoreEl = document.getElementById('risk-score');
  scoreEl.textContent = `${score}/8`;
  scoreEl.style.color = level.color;
  scoreEl.style.textShadow = `0 0 30px ${level.color}88`;
  document.getElementById('risk-label').textContent = level.label;
  document.getElementById('risk-label').style.color = level.color;
  document.getElementById('risk-desc').textContent = level.desc;
  document.getElementById('risk-rec').textContent = level.rec;

  Progress.saveTest('gambling', { score, level: level.label, color: level.color });
}

function finishTest() { goToNextTest(); }
</script>
</body>
</html>
