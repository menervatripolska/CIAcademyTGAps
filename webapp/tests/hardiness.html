<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <title>–ñ–∏–∑–Ω–µ—Å—Ç–æ–π–∫–æ—Å—Ç—å ‚Äî Crypto Intelligence Academy</title>
  <link rel="stylesheet" href="../css/kryptan.css">
  <style>
    #result-section { display: none; }
    .scale-row { margin-bottom: 20px; }
    .scale-title {
      font-family: var(--font-title);
      font-size: 0.75rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      margin-bottom: 8px;
      display: block;
    }
    .scale-vals {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 6px;
    }
    .scale-big {
      font-family: var(--font-title);
      font-size: 2rem;
      font-weight: 900;
    }
    .scale-norm {
      font-family: var(--font-body);
      font-size: 0.8rem;
      color: var(--text-muted);
    }
  </style>
</head>
<body>
<div class="page-wrap">

  <div style="padding:20px 0 8px;">
    <div style="display:flex;align-items:center;gap:12px;margin-bottom:16px;">
      <button onclick="history.back()" class="btn btn-outline" style="padding:8px 14px;font-size:0.8rem;">‚Üê –ù–∞–∑–∞–¥</button>
      <div style="flex:1;">
        <div style="height:4px;background:rgba(255,255,255,0.06);border-radius:2px;overflow:hidden;">
          <div id="qProgressFill" style="height:100%;width:0%;background:linear-gradient(90deg,var(--neon-purple),var(--neon-green));transition:width 0.4s;"></div>
        </div>
      </div>
      <span id="qProgressCount" style="font-family:var(--font-title);font-size:0.75rem;color:var(--neon-purple);">0/45</span>
    </div>
    <div class="neon-badge purple" style="margin-bottom:12px;">üõ°Ô∏è –¢–µ—Å—Ç 3 –∏–∑ 5</div>
    <h1 style="font-family:var(--font-title);font-size:1.4rem;font-weight:900;letter-spacing:0.05em;text-transform:uppercase;background:linear-gradient(135deg,#fff,var(--neon-violet));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:6px;">–ñ–∏–∑–Ω–µ—Å—Ç–æ–π–∫–æ—Å—Ç—å</h1>
    <p style="font-family:var(--font-body);color:var(--text-muted);font-size:0.9rem;font-weight:500;">–¢–µ—Å—Ç –ú–∞–¥–¥–∏‚Äì–õ–µ–æ–Ω—Ç—å–µ–≤–∞. –®–∫–∞–ª–∞ 0‚Äì3. 45 —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π.</p>
    <div style="margin-top:10px;padding:10px 14px;background:rgba(155,48,255,0.06);border:1px solid var(--border-neon);border-radius:var(--radius-sm);">
      <p style="font-family:var(--font-body);font-size:0.85rem;color:var(--text-secondary);">
        <strong style="color:var(--neon-violet);">0</strong> ‚Äî –ù–µ—Ç, –Ω–µ —Å–æ–≥–ª–∞—Å–µ–Ω&emsp;
        <strong style="color:var(--neon-violet);">1</strong> ‚Äî –°–∫–æ—Ä–µ–µ –Ω–µ—Ç&emsp;
        <strong style="color:var(--neon-violet);">2</strong> ‚Äî –°–∫–æ—Ä–µ–µ –¥–∞&emsp;
        <strong style="color:var(--neon-violet);">3</strong> ‚Äî –î–∞, —Å–æ–≥–ª–∞—Å–µ–Ω
      </p>
    </div>
  </div>

  <div id="quiz-container"></div>

  <button class="btn btn-primary btn-full" id="calc-btn" onclick="calcHardiness()" style="margin-top:16px;display:none;">
    ‚ö° –ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
  </button>

  <!-- Result -->
  <div id="result-section">
    <div class="chain-divider"><span class="chain-icon">‚óà –†–ï–ó–£–õ–¨–¢–ê–¢ ‚óà</span></div>

    <div class="ka-card">
      <div class="question-num">üõ°Ô∏è –ò–Ω–¥–µ–∫—Å –∂–∏–∑–Ω–µ—Å—Ç–æ–π–∫–æ—Å—Ç–∏</div>
      <div class="scale-row">
        <span class="scale-title" style="color:var(--neon-purple);">–û–±—â–∏–π –∏–Ω–¥–µ–∫—Å</span>
        <div class="scale-vals">
          <span class="scale-big" id="res-total" style="color:var(--neon-violet);"></span>
          <span class="scale-norm">–Ω–æ—Ä–º–∞: 80‚Äì99</span>
        </div>
        <p id="desc-total" style="font-family:var(--font-text);font-size:0.9rem;color:var(--text-secondary);line-height:1.6;"></p>
      </div>
    </div>

    <div class="ka-card">
      <div class="question-num">üìä –°—É–±—à–∫–∞–ª—ã</div>

      <div class="scale-row">
        <span class="scale-title" style="color:var(--neon-green);">‚ö° –í–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç—å</span>
        <div class="scale-vals">
          <span class="scale-big" id="res-commitment" style="color:var(--neon-green);"></span>
          <span class="scale-norm">–Ω–æ—Ä–º–∞: 37‚Äì47</span>
        </div>
        <p id="desc-commitment" style="font-family:var(--font-text);font-size:0.85rem;color:var(--text-secondary);line-height:1.6;"></p>
      </div>

      <div class="chain-divider" style="margin:12px 0;"><span class="chain-icon">‚óá</span></div>

      <div class="scale-row">
        <span class="scale-title" style="color:var(--neon-cyan);">üéØ –ö–æ–Ω—Ç—Ä–æ–ª—å</span>
        <div class="scale-vals">
          <span class="scale-big" id="res-control" style="color:var(--neon-cyan);"></span>
          <span class="scale-norm">–Ω–æ—Ä–º–∞: 29‚Äì37</span>
        </div>
        <p id="desc-control" style="font-family:var(--font-text);font-size:0.85rem;color:var(--text-secondary);line-height:1.6;"></p>
      </div>

      <div class="chain-divider" style="margin:12px 0;"><span class="chain-icon">‚óá</span></div>

      <div class="scale-row">
        <span class="scale-title" style="color:var(--neon-gold);">üî• –ü—Ä–∏–Ω—è—Ç–∏–µ —Ä–∏—Å–∫–∞</span>
        <div class="scale-vals">
          <span class="scale-big" id="res-challenge" style="color:var(--neon-gold);"></span>
          <span class="scale-norm">–Ω–æ—Ä–º–∞: 13‚Äì18</span>
        </div>
        <p id="desc-challenge" style="font-family:var(--font-text);font-size:0.85rem;color:var(--text-secondary);line-height:1.6;"></p>
      </div>
    </div>

    <button class="btn btn-success btn-full" onclick="finishTest()">
      ‚úÖ –ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Ç–µ—Å—Ç—É
    </button>
  </div>

</div>

<script src="../js/core.js"></script>
<script>
const questions = [
  "–ß–∞—Å—Ç–æ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ—Å—Ç—å –≤ –±—É–¥—É—â–µ–º –ø—É–≥–∞–µ—Ç –º–µ–Ω—è –±–æ–ª—å—à–µ, —á–µ–º —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏ –≤ –Ω–∞—Å—Ç–æ—è—â–µ–º.",
  "–ú–Ω–µ –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ —è –Ω–µ –º–æ–≥—É –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —Ç–æ, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –º–æ–µ–π –∂–∏–∑–Ω–∏.",
  "–Ø –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞—é –¥–µ–ª–∞—Ç—å —Ç–æ, —á—Ç–æ –º–Ω–µ —É–∂–µ —Ö–æ—Ä–æ—à–æ –∑–Ω–∞–∫–æ–º–æ, —á–µ–º –±—Ä–∞—Ç—å—Å—è –∑–∞ —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ.",
  "–Ø —á–∞—Å—Ç–æ –ø—Ä–æ—Å—ã–ø–∞—é—Å—å —Å –ø—Ä–µ–¥—á—É–≤—Å—Ç–≤–∏–µ–º, —á—Ç–æ –¥–µ–Ω—å –±—É–¥–µ—Ç –Ω–µ—É–¥–∞—á–Ω—ã–º.",
  "–ò–Ω–æ–≥–¥–∞ –º–Ω–µ –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ –≤—Å—ë, —á—Ç–æ —è –¥–µ–ª–∞—é, –Ω–∞–ø—Ä–∞—Å–Ω–æ.",
  "–í –º–æ–µ–π –∂–∏–∑–Ω–∏ –º–∞–ª–æ –≤–µ—â–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ-–Ω–∞—Å—Ç–æ—è—â–µ–º—É –º–µ–Ω—è –∏–Ω—Ç–µ—Ä–µ—Å—É—é—Ç.",
  "–Ø –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞—é –Ω–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –Ω–∏—á–µ–≥–æ –Ω–∞–¥–æ–ª–≥–æ, —Ç–∞–∫ –∫–∞–∫ –≤—Å—ë —Ä–∞–≤–Ω–æ –≤—Å—ë –ø–æ–π–¥—ë—Ç –∏–Ω–∞—á–µ.",
  "–Ø –Ω–µ —É–≤–µ—Ä–µ–Ω, —á—Ç–æ –º–æ–∏ –¥–µ–π—Å—Ç–≤–∏—è –º–æ–≥—É—Ç –Ω–∞ —á—Ç–æ-—Ç–æ –ø–æ–≤–ª–∏—è—Ç—å.",
  "–ú–Ω–µ —Ç—Ä—É–¥–Ω–æ –º–µ–Ω—è—Ç—å —Å–≤–æ–∏ –ø—Ä–∏–≤—ã—á–∫–∏, –¥–∞–∂–µ –µ—Å–ª–∏ —è –ø–æ–Ω–∏–º–∞—é, —á—Ç–æ —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ.",
  "–Ø —á–∞—Å—Ç–æ —á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –ª–∏—à–Ω–∏–º –≤ –∫–æ–º–ø–∞–Ω–∏–∏ –ª—é–¥–µ–π.",
  "–ù–∞ —Ä–∞–±–æ—Ç–µ (–≤ —É—á—ë–±–µ) —è —á–∞—Å—Ç–æ —á—É–≤—Å—Ç–≤—É—é, —á—Ç–æ –æ—Ç –º–µ–Ω—è –º–∞–ª–æ —á—Ç–æ –∑–∞–≤–∏—Å–∏—Ç.",
  "–Ø –Ω–µ –ª—é–±–ª—é —Ä–∏—Å–∫–æ–≤–∞—Ç—å, –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–∞ –∫–æ–Ω—É —Å—Ç–æ–∏—Ç —É—Å–ø–µ—Ö.",
  "–ú–Ω–µ –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ —è –∂–∏–≤—É –Ω–µ —Å–≤–æ–µ–π –∂–∏–∑–Ω—å—é.",
  "–ö–æ–≥–¥–∞ —Å–ª—É—á–∞–µ—Ç—Å—è –Ω–µ–ø—Ä–∏—è—Ç–Ω–æ—Å—Ç—å, —è —á–∞—Å—Ç–æ —á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –±–µ—Å–ø–æ–º–æ—â–Ω—ã–º.",
  "–í–µ—á–µ—Ä–æ–º —è —á–∞—Å—Ç–æ —á—É–≤—Å—Ç–≤—É—é, —á—Ç–æ –¥–µ–Ω—å –ø—Ä–æ—à—ë–ª –≤–ø—É—Å—Ç—É—é.",
  "–Ø —Ä–µ–¥–∫–æ —á—É–≤—Å—Ç–≤—É—é, —á—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤–æ–≤–ª–µ—á—ë–Ω –≤ —Ç–æ, —á–µ–º –∑–∞–Ω–∏–º–∞—é—Å—å.",
  "–Ø —Å—á–∏—Ç–∞—é, —á—Ç–æ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Å–æ–±—ã—Ç–∏–π –≤ –∂–∏–∑–Ω–∏ ‚Äî —ç—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Å—Ç–µ—á–µ–Ω–∏—è –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤.",
  "–ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø–ª–∞–Ω–∞—Ö –æ–±—ã—á–Ω–æ –º–µ–Ω—è —Ä–∞–∑–¥—Ä–∞–∂–∞—é—Ç.",
  "–Ø —Ä–µ–¥–∫–æ –ø–æ–ª—É—á–∞—é —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ –æ—Ç –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã—Ö –¥–µ–ª.",
  "–ß–∞—Å—Ç–æ —è –Ω–µ –º–æ–≥—É –∑–∞—Å—Ç–∞–≤–∏—Ç—å —Å–µ–±—è –¥–æ–≤–µ—Å—Ç–∏ –Ω–∞—á–∞—Ç–æ–µ –¥–æ –∫–æ–Ω—Ü–∞.",
  "–£ –º–µ–Ω—è —Ä–µ–¥–∫–æ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—â—É—â–µ–Ω–∏–µ, —á—Ç–æ —è –Ω–∞—Ö–æ–∂—É—Å—å –Ω–∞ —Å–≤–æ—ë–º –º–µ—Å—Ç–µ.",
  "–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ª—é–¥–µ–π, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ —è –æ–±—â–∞—é—Å—å, –º–∞–ª–æ –Ω–∞ –º–µ–Ω—è –≤–ª–∏—è—é—Ç.",
  "–Ø —Å—Ç–∞—Ä–∞—é—Å—å –∏–∑–±–µ–≥–∞—Ç—å —Å–∏—Ç—É–∞—Ü–∏–π, –≥–¥–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —É–¥–∞—á–∏.",
  "–ú–æ–∏ —É—Å–∏–ª–∏—è —Ä–µ–¥–∫–æ –ø—Ä–∏–Ω–æ—Å—è—Ç —Ç–µ –ø–ª–æ–¥—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ —è —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–ª.",
  "–Ø —É–≤–µ—Ä–µ–Ω, —á—Ç–æ —Å–º–æ–≥—É —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è —Å –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ–º –∂–∏–∑–Ω–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º.",
  "–ß–∞—Å—Ç–æ –º–Ω–µ –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ —è ‚Äî —Å—Ç–æ—Ä–æ–Ω–Ω–∏–π –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å –≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –∂–∏–∑–Ω–∏.",
  "–ï—Å–ª–∏ —Å–∏—Ç—É–∞—Ü–∏—è –≤—ã—Ö–æ–¥–∏—Ç –∏–∑-–ø–æ–¥ –∫–æ–Ω—Ç—Ä–æ–ª—è, —è –±—ã—Å—Ç—Ä–æ –æ–ø—É—Å–∫–∞—é —Ä—É–∫–∏.",
  "–Ø –ª—é–±–ª—é —Å—Ç–∞–≤–∏—Ç—å –ø–µ—Ä–µ–¥ —Å–æ–±–æ–π —Å–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏, –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ —É–≤–µ—Ä–µ–Ω –≤ —É—Å–ø–µ—Ö–µ.",
  "–í –º–æ–µ–π –∂–∏–∑–Ω–∏ –º–Ω–æ–≥–æ —Å–∫—É–∫–∏ –∏ –æ–¥–Ω–æ–æ–±—Ä–∞–∑–∏—è.",
  "–ú–æ–∏ —É—Å–ø–µ—Ö–∏ ‚Äî —ç—Ç–æ —á–∞—â–µ –≤—Å–µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–µ–∑–µ–Ω–∏—è, –∞ –Ω–µ –º–æ–∏—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π.",
  "–Ø –≥–æ—Ç–æ–≤ –±—Ä–∞—Ç—å—Å—è –∑–∞ –Ω–æ–≤—É—é —Ä–∞–±–æ—Ç—É, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω–∞ –∫–∞–∂–µ—Ç—Å—è —Å–ª–∏—à–∫–æ–º —Å–ª–æ–∂–Ω–æ–π.",
  "–û–∫—Ä—É–∂–∞—é—â–∏–π –º–∏—Ä –∫–∞–∂–µ—Ç—Å—è –º–Ω–µ —á—É–∂–∏–º –∏ –Ω–µ–ø–æ–Ω—è—Ç–Ω—ã–º.",
  "–Ø —á—É–≤—Å—Ç–≤—É—é, —á—Ç–æ –º–æ–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –Ω–∞—Ö–æ–¥—è—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤ –∂–∏–∑–Ω–∏.",
  "–ñ–∏–∑–Ω—å –∫–∞–∂–µ—Ç—Å—è –º–Ω–µ –¥–æ–≤–æ–ª—å–Ω–æ —Å–∫—É—á–Ω—ã–º –∑–∞–Ω—è—Ç–∏–µ–º.",
  "–Ø —Ä–µ–¥–∫–æ —Å—Ç–∞–≤–ª—é –ø–µ—Ä–µ–¥ —Å–æ–±–æ–π —Ü–µ–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ç—Ä–µ–±—É—é—Ç –±–æ–ª—å—à–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è —Å–∏–ª.",
  "–Ø –≤–µ—Ä—é, —á—Ç–æ –ª—é–±—ã–µ –ø–µ—Ä–µ–º–µ–Ω—ã –≤ –∫–æ–Ω–µ—á–Ω–æ–º —Å—á—ë—Ç–µ –≤–µ–¥—É—Ç –∫ –ª—É—á—à–µ–º—É.",
  "–¢–æ, —á—Ç–æ —è –¥–µ–ª–∞—é –∫–∞–∂–¥—ã–π –¥–µ–Ω—å, –∏–º–µ–µ—Ç –¥–ª—è –º–µ–Ω—è –±–æ–ª—å—à–æ–π —Å–º—ã—Å–ª.",
  "–Ø —á–∞—Å—Ç–æ –ª–æ–≤–ª—é —Å–µ–±—è –Ω–∞ –º—ã—Å–ª–∏, —á—Ç–æ –ø–ª—ã–≤—É –ø–æ —Ç–µ—á–µ–Ω–∏—é.",
  "–Ø —á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è —É–≤–µ—Ä–µ–Ω–Ω–æ –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π.",
  "–°—Ç–æ–ª–∫–Ω—É–≤—à–∏—Å—å —Å –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ–º, —è —Å—Ç–∞—Ä–∞—é—Å—å –Ω–∞–π—Ç–∏ –≤ –Ω—ë–º –ø–æ–ª–µ–∑–Ω—ã–π –æ–ø—ã—Ç.",
  "–Ø –º–æ–≥—É –∏–∑–º–µ–Ω–∏—Ç—å —Å–≤–æ—é –∂–∏–∑–Ω—å –≤ –ª—É—á—à—É—é —Å—Ç–æ—Ä–æ–Ω—É, –µ—Å–ª–∏ –∑–∞—Ö–æ—á—É.",
  "–Ø —Å –∏–Ω—Ç–µ—Ä–µ—Å–æ–º –∂–¥—É —Ç–æ–≥–æ, —á—Ç–æ –ø—Ä–∏–Ω–µ—Å—ë—Ç –º–Ω–µ –∑–∞–≤—Ç—Ä–∞—à–Ω–∏–π –¥–µ–Ω—å.",
  "–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –º–æ–∏—Ö –∂–µ–ª–∞–Ω–∏–π —Å–±—ã–≤–∞—é—Ç—Å—è –±–ª–∞–≥–æ–¥–∞—Ä—è –º–æ–µ–º—É —É–ø–æ—Ä—Å—Ç–≤—É.",
  "–Ø —á—É–≤—Å—Ç–≤—É—é, —á—Ç–æ –∏–º–µ—é –ø—Ä–∞–≤–æ –≥–æ–ª–æ—Å–∞ –≤ –ø—Ä–∏–Ω—è—Ç–∏–∏ –≤–∞–∂–Ω—ã—Ö –¥–ª—è –º–µ–Ω—è —Ä–µ—à–µ–Ω–∏–π.",
  "–õ—é–±—ã–µ —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏ –∑–∞–∫–∞–ª—è—é—Ç —Ö–∞—Ä–∞–∫—Ç–µ—Ä –∏ –¥–µ–ª–∞—é—Ç –Ω–∞—Å —Å–∏–ª—å–Ω–µ–µ.",
];

let answers = {};

const container = document.getElementById('quiz-container');
questions.forEach((q, i) => {
  const div = document.createElement('div');
  div.className = 'ka-card';
  div.style.marginBottom = '12px';
  div.style.padding = '16px 18px';
  div.innerHTML = `
    <div class="question-num">–£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ ${i+1} –∏–∑ 45</div>
    <div class="question-text" style="font-size:1rem;margin-bottom:14px;">${q}</div>
    <div class="scale-options">
      ${[0,1,2,3].map(v => `<button class="scale-btn" onclick="selectScale(${i},${v},this)">${v}</button>`).join('')}
    </div>
    <div class="scale-labels">
      <span>–ù–µ —Å–æ–≥–ª–∞—Å–µ–Ω</span>
      <span>–°–æ–≥–ª–∞—Å–µ–Ω</span>
    </div>`;
  container.appendChild(div);
});

function selectScale(idx, val, btn) {
  const card = btn.closest('.ka-card');
  card.querySelectorAll('.scale-btn').forEach(b => b.classList.remove('selected'));
  btn.classList.add('selected');
  answers[idx] = val;
  updateProgress();
}

function updateProgress() {
  const done = Object.keys(answers).length;
  const pct = done / questions.length * 100;
  document.getElementById('qProgressFill').style.width = pct + '%';
  document.getElementById('qProgressCount').textContent = `${done}/${questions.length}`;
  document.getElementById('calc-btn').style.display = done >= questions.length ? 'flex' : 'none';
}

function calcHardiness() {
  if (Object.keys(answers).length < questions.length) {
    showToast('–û—Ç–≤–µ—Ç—å –Ω–∞ –≤—Å–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è!'); return;
  }

  let sc = { commitment: 0, control: 0, challenge: 0 };

  for (let i = 0; i < 45; i++) {
    const v = answers[i];
    const n = i + 1; // 1-based

    // –í–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç—å
    if ([1,4,25,33,37,39,42].includes(n)) {
      if ([1,4].includes(n)) sc.commitment += (3-v); else sc.commitment += v;
    } else if ([7,10,13,15,16,19,21,24,26,29,34].includes(n)) {
      sc.commitment += (3-v);
    }
    // –ö–æ–Ω—Ç—Ä–æ–ª—å
    if ([2,5,11,20,31,41,43,44].includes(n)) {
      if ([2,5,11,20].includes(n)) sc.control += (3-v); else sc.control += v;
    } else if ([8,14,17,22,27,30,32,35,38].includes(n)) {
      sc.control += (3-v);
    }
    // –ü—Ä–∏–Ω—è—Ç–∏–µ —Ä–∏—Å–∫–∞
    if ([3,6,12,18,23,28,36,40,45].includes(n)) {
      if ([3,6,12,18,23].includes(n)) sc.challenge += (3-v); else sc.challenge += v;
    } else if ([9].includes(n)) {
      sc.challenge += (3-v);
    }
  }

  const total = sc.commitment + sc.control + sc.challenge;

  document.getElementById('quiz-container').style.display = 'none';
  document.getElementById('calc-btn').style.display = 'none';
  document.getElementById('result-section').style.display = 'block';
  window.scrollTo(0,0);

  document.getElementById('res-total').textContent = total;
  document.getElementById('res-commitment').textContent = sc.commitment;
  document.getElementById('res-control').textContent = sc.control;
  document.getElementById('res-challenge').textContent = sc.challenge;

  document.getElementById('desc-total').textContent =
    total >= 99 ? '–í—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å. –ú–æ—â–Ω—ã–π –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∏–º–º—É–Ω–∏—Ç–µ—Ç. –°—Ç—Ä–µ—Å—Å ‚Äî —ç—Ç–æ –≤—ã–∑–æ–≤ –∏ –∏—Å—Ç–æ—á–Ω–∏–∫ —ç–Ω–µ—Ä–≥–∏–∏ –¥–ª—è —Ç–µ–±—è.' :
    total <= 62 ? '–ù–∏–∑–∫–∏–π —É—Ä–æ–≤–µ–Ω—å. –£—è–∑–≤–∏–º–æ—Å—Ç—å –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–º–µ–Ω–∞–º–∏. –°—Ç—Ä–µ—Å—Å –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è –∫–∞–∫ —É–≥—Ä–æ–∑–∞, —á—Ç–æ –≤–µ–¥—ë—Ç –∫ –∞–ø–∞—Ç–∏–∏.' :
                  '–°—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å. –î–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π –∑–∞–ø–∞—Å –ø—Ä–æ—á–Ω–æ—Å—Ç–∏, –Ω–æ –∑–∞—Ç—è–∂–Ω—ã–µ –∫—Ä–∏–∑–∏—Å—ã –º–æ–≥—É—Ç –≤–µ—Å—Ç–∏ –∫ –∏—Å—Ç–æ—â–µ–Ω–∏—é.';

  document.getElementById('desc-commitment').textContent =
    sc.commitment > 47 ? '–í—ã—Å–æ–∫–∞—è. –£–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ –æ—Ç –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –æ—â—É—â–µ–Ω–∏–µ –∑–Ω–∞—á–∏–º–æ—Å—Ç–∏ –∏ –≤–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç—å –≤ –∂–∏–∑–Ω—å.' :
    sc.commitment < 27 ? '–ù–∏–∑–∫–∞—è. –û—â—É—â–µ–Ω–∏–µ –æ—Ç—á—É–∂–¥—ë–Ω–Ω–æ—Å—Ç–∏, –∞–ø–∞—Ç–∏—è, —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏ —Å –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏–µ–º —Å–º—ã—Å–ª–∞.' :
                          '–°—Ä–µ–¥–Ω—è—è. –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ –æ—â—É—â–µ–Ω–∏–µ —Å–º—ã—Å–ª–∞, –∏–Ω–æ–≥–¥–∞ ‚Äî –æ—Ç—Å—Ç—Ä–∞–Ω—ë–Ω–Ω–æ—Å—Ç—å.';

  document.getElementById('desc-control').textContent =
    sc.control > 37 ? '–í—ã—Å–æ–∫–∏–π. –£–±–µ–∂–¥—ë–Ω–Ω–æ—Å—Ç—å –≤–æ –≤–ª–∏—è–Ω–∏–∏ –Ω–∞ —Ö–æ–¥ —Å–æ–±—ã—Ç–∏–π. –ê–∫—Ç–∏–≤–Ω–∞—è –∂–∏–∑–Ω–µ–Ω–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è.' :
    sc.control < 22 ? '–ù–∏–∑–∫–∏–π. –°–∫–ª–æ–Ω–Ω–æ—Å—Ç—å –∫ –±–µ—Å–ø–æ–º–æ—â–Ω–æ—Å—Ç–∏. –ú–∏—Ä –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è –∫–∞–∫ –Ω–µ–ø–æ–¥–∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π.' :
                       '–°—Ä–µ–¥–Ω–∏–π. –°–∏—Ç—É–∞—Ç–∏–≤–Ω–æ–µ —á—É–≤—Å—Ç–≤–æ –∫–æ–Ω—Ç—Ä–æ–ª—è.';

  document.getElementById('desc-challenge').textContent =
    sc.challenge > 18 ? '–í—ã—Å–æ–∫–æ–µ. –õ—é–±–æ–≤—å –∫ –ø–µ—Ä–µ–º–µ–Ω–∞–º, –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å —Ä–∏—Å–∫–æ–≤–∞—Ç—å —Ä–∞–¥–∏ –æ–ø—ã—Ç–∞.' :
    sc.challenge < 8  ? '–ù–∏–∑–∫–æ–µ. –î–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç –æ—Ç –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ—Å—Ç–∏, —Ç—è–≥–∞ –∫ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏.' :
                         '–°—Ä–µ–¥–Ω–µ–µ. –£–º–µ—Ä–µ–Ω–Ω–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–∏—Å–∫—É.';

  const level = total >= 99 ? 'high' : total <= 62 ? 'low' : 'medium';
  Progress.saveTest('hardiness', { total, commitment: sc.commitment, control: sc.control, challenge: sc.challenge, level });
}

function finishTest() { goToNextTest(); }
</script>
</body>
</html>
